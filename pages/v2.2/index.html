<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANT AI (Alpha)</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style_dark.css">
    <script src="env.js"></script>
    <script src="env_overwrite.js"></script>
    <script src="js/management.js"></script>
    <script src="js/field.js"></script>
    <script src="js/prompt.js"></script>
    <script src="js/post.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/card.js"></script>
    <script src="js/menu.js"></script>
    <script src="js/tran.js"></script>
    <script defer src="default_value.js"></script>
    <script defer src="script.js"></script>
	<style id="style_active_article">#é¦–é  {display:flex;}</style>
</head>
<body>
	<header>
		<nav>
			<ul>
				<li><a href="index.html?">é¦–é </a></li>
				<li id="nav_chat_name">èŠå¤©å®¤</li>
				<li id="nav_active_article"></li>
			</ul>
		</nav>
		<button id="dark_toggle" onclick="onDarkToggleClick();">ğŸ”†</button>
		<button id="menu_icon" onclick="onMenuIconClick(event);">â€¦</button>
		<menu isShow="false">
			<li onclick="onMenuItemClick('å°è©±');">å°è©±</li>
			<li onclick="onMenuItemClick('å½¢è±¡');">å½¢è±¡</li>
			<li onclick="onMenuItemClick('è§’è‰²');">è§’è‰²</li>
			<li onclick="onMenuItemClick('æç¤ºè©');">æç¤ºè©</li>
			<li onclick="onMenuItemClick('åƒæ•¸');">åƒæ•¸</li>
			<hr />
			<li onclick="onMenuItemClick('ç®¡ç†');">ç®¡ç†</li>
		</menu>
	</header>
	<main>
		<article id="é¦–é ">
			<label>
				<button class="grow" onclick="onNewChatClick()">æ–°èŠå¤©</button>
			</label>
			<section class="grow">
				<ul class="chats">
				</ul>
			</section>
		</article>
		
		<article id="å°è©±">
			<section class="grow">
				<ul class="posts">
				</ul>
			</section>
			<section class="bottom">
				<textarea id="conversation_usertext" onkeydown="onUsertextKeydown(event)"></textarea>
				<button onclick="onUsertextSubmitClick()">â†‘</button>
			</section>
		</article>

		<article id="å½¢è±¡" class="field_form">
			<div class="grow">
				<details open>
					<summary>å½¢è±¡åç¨± {{user}}</summary>
					<input type="text" field-key="user" onchange="onFieldChange()" placeholder="ç©å®¶å½¢è±¡å" />
				</details>
				<details open>
					<summary>å½¢è±¡èªªæ˜ {{user.description}}</summary>
					<textarea field-key="user.description" onchange="onFieldChange()" placeholder="ç©å®¶å½¢è±¡æ•˜è¿°" ></textarea>
				</details>
			</div>
			<div class="bottom_control">
				<button onclick="onResetClick()">å…¨éƒ¨é‡ç½®</button>
				<button onclick="onSaveClick()">å…¨éƒ¨å„²å­˜</button>
			</div>
		</article>

		<article id="è§’è‰²" class="field_form">
			<div class="grow">
				<details open>
					<summary>è§’è‰²åç¨± {{char}}</summary>
					<input type="text" field-key="char" placeholder="è§’è‰²åç¨±" />
				</details>
				<details open>
					<summary>è§’è‰²èªªæ˜ {{char.description}}</summary>
					<textarea field-key="char.description" placeholder="AIæ‰€æ‰®æ¼”çš„è§’è‰²è³‡æ–™" ></textarea>
				</details>
				<details open>
					<summary>å°è©±æƒ…å¢ƒ {{char.scenario}}</summary>
					<textarea field-key="char.scenario" placeholder="å°è©±çš„èƒŒæ™¯è³‡æ–™ã€ä¸–ç•Œè§€" ></textarea>
				</details>
				<details open>
					<summary>å°è©±ç¯„ä¾‹ {{char.example}}</summary>
					<textarea field-key="char.example" placeholder="AIç”Ÿæˆå›æ‡‰çš„åƒè€ƒç¯„ä¾‹" ></textarea>
				</details>
				<details>
					<summary>å°è©±è¨˜æ†¶ {{char.memory}}</summary>
					<textarea field-key="char.memory" placeholder="éå»å°è©±çš„è³‡è¨Š" ></textarea>
				</details>
			</div>
			<div class="bottom_control">
				<button onclick="onResetClick()">å…¨éƒ¨é‡ç½®</button>
				<button onclick="onSaveClick()">å…¨éƒ¨å„²å­˜</button>
			</div>
		</article>
		
		<article id="æç¤ºè©" class="field_form">
			<label>
				æŒ‡ä»¤é•·åº¦
				<input type="text" field-key="context_size" placeholder="é€å‡ºçµ¦APIçš„æŒ‡ä»¤é•·åº¦ä¸Šé™(ä¼°è¨ˆå€¼)ï¼Œå½±éŸ¿å°è©±æ­·å²çš„è¨˜æ†¶é•·åº¦ã€‚" />
			</label>
			<textarea class="grow" field-key="prompt" ></textarea>
			
			<div class="bottom_control">
				<button onclick="onResetClick()">å…¨éƒ¨é‡ç½®</button>
				<button onclick="onSaveClick()">å…¨éƒ¨å„²å­˜</button>
			</div>
		</article>
		
		<article id="åƒæ•¸" class="field_form">
			<textarea class="grow" field-key="parameter" ></textarea>
			<div class="bottom_control">
				<button onclick="onResetClick()">å…¨éƒ¨é‡ç½®</button>
				<button onclick="onSaveClick()">å…¨éƒ¨å„²å­˜</button>
			</div>
		</article>
		
		<article id="ç®¡ç†">
			<label>API URL<input type="url" field-key="api_url" onchange="onApiChange()" /></label>
			<label>API KEY<input type="password" field-key="api_key" onchange="onApiChange()" /></label>
			<label>
				<button class="grow" onclick="onForkChatClick()">å»ºç«‹èŠå¤©å‰¯æœ¬</button>
			</label>
			<label>
				<button class="grow" onclick="onDeleteChatClick()">åˆªé™¤èŠå¤©</button>
			</label>
			<div>
				åŒ¯å‡º
				<button onclick="onExportFileClick()">è‡³æœ¬æ©Ÿæª”æ¡ˆ</button>
			</div>
			<div>
				åŒ¯å…¥
				<input type="file" id="import_chat_file" style="display:none;" onchange="onImportFileChange(event)" />
				<button onclick="onImportFileClick()">è‡ªæœ¬æ©Ÿæª”æ¡ˆ</button>
			</div>
		</article>
		
		<article id="ç¿»è­¯" class="field_form">
			<div class="grow">
				<div style="display:flex; align-items:center; margin:0 0 0.5rem;">
					<input type="text" style="flex:0.5; padding:0;" field-key="tran_lang_frontend" placeholder="ä½¿ç”¨è€…èªè¨€" value="ç¹é«”ä¸­æ–‡" />
					â†â†’
					<input type="text" style="flex:0.5; padding:0;" field-key="tran_lang_llm" placeholder="AIèªè¨€" value="English" />
				</div>
				<details open>
					<summary>æç¤ºè©é•·åº¦</summary>
					<input type="number" style="flex:0.5; padding:0;" field-key="tran_context_size" value="16000" />
				</details>
				<details open>
					<summary>åƒæ•¸</summary>
					<textarea style="height:6.5rem;" field-key="tran_parameter" placeholder="ç¿»è­¯æŒ‡ä»¤åƒæ•¸" >{
 "model": "google/gemma-3-27b-it:free",
 "temperature": 0.5,
 "messages":[]
}</textarea>
				</details>
				<details open>
					<summary>æç¤ºè©</summary>
					<textarea style="height:calc(100dvh - 8rem);" field-key="tran_prompt" placeholder="ç¿»è­¯æç¤ºè©" >You are a professional literary translator. Your task is to translate a new chapter of an ongoing literary work. After reviewing the background information and the most recent translated sections provided, translate the latest original-language chapter into the same target language. Ensure consistency in terminology with the earlier translations, and make the new translation flow seamlessly as a continuation of the translated text.

## About the creation: {
{{char.scenario}}

{{char.description}}

{{user.description}}
}</textarea>
				</details>
			</div>
			<div class="bottom_control">
				<button onclick="onTranResetClick()">é‡ç½®</button>
				<button onclick="onTranSaveClick()">å„²å­˜(å…¨åŸŸè¨­å®š)</button>
			</div>
		</article>
	</main>
	<div id="loading" class="overlay show"><div class="spinner"></div></div>
</body>

<template id="html_post_item">
	<li post-key="" role="" mode="text" onclick="onPostClick(this, event);">
		<div class="content">
			<div class="text">
				<div class="frontend"></div>
				<div class="llm"></div>
			</div>
			<div class="edit">
				<textarea class="frontend" placeholder="ä½¿ç”¨è€…èªè¨€"></textarea>
				<textarea class="llm" placeholder="AIèªè¨€"></textarea>
			</div>
		</div>
		<div class="control">
			<div class="text">
				<button op="left" class="moveLeft">ï¼œ</button>
				<span>- / -</span>
				<button op="right" class="moveRight">ï¼</button>
				<button op="add"    alt="æ–°å¢" title="æ–°å¢ä¸€å‰‡å›æ‡‰">â•</button>
				<button op="delete" alt="åˆªé™¤" title="åˆªé™¤æ­¤å‰‡å›æ‡‰">ğŸ—‘</button>
				<button op="regen"  alt="é‡æ•´" title="é‡æ–°ç”¢ç”Ÿå›æ‡‰">ğŸ”„</button>
				
				<button op="edit"   alt="ç·¨è¼¯" title="ç·¨è¼¯å›æ‡‰å…§å®¹" class="right">âœï¸</button>
			</div>
			<div class="edit">
				<div class="left">
					<a class="tran_link" onclick="onMenuItemClick('ç¿»è­¯');">ç¿»è­¯è¨­å®š</a>
				</div>
				<div class="center">
					<button op="toLlm" alt="ç¿»è­¯ç‚ºLLMèªè¨€" title="ç¿»è­¯ç‚ºLLMèªè¨€">ğŸ¡†</button>
					<button op="toFrontend" alt="ç¿»è­¯ç‚ºä½¿ç”¨è€…èªè¨€" title="ç¿»è­¯ç‚ºä½¿ç”¨è€…èªè¨€">ğŸ¡„</button>
				</div>
				<div class="right">
					<button op="cancel" alt="æ”¾æ£„" title="æ”¾æ£„è®Šæ›´">âŒ</button>
					<button op="save"   alt="ç¢ºå®š" title="ç¢ºå®š">âœ”ï¸</button>
				</div>
			</div>
		</div>
	</li>
</template>

<template id="html_chat_item">
	<li>
		<a href=""><h4 class="title"></h4><p class="content"></p></a>
	</li>
</template>

</html>
